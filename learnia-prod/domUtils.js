function formatMessage(e){if(!e)return"";return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>")}export function addMessage(e,t,n){const r=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=document.createElement("div");s.className="message-enter mb-4",console.log("Adding message:",e,"from:",t);const o=formatMessage(e);console.log("Formatted text:",o),s.innerHTML="user"===t?`\n            <div class="flex justify-end">\n                <div class="bg-primary-100 p-3 rounded-lg shadow-sm max-w-[80%] border border-primary-200">\n                    <p class="text-gray-800 text-left">${o}</p>\n                </div>\n            </div>\n            <div class="text-xs text-primary-500 mt-1 text-right">${r}</div>\n        `:`\n            <div class="flex items-start">\n                <div class="w-8 h-8 rounded-full bg-white border border-primary-200 flex items-center justify-center mr-2 text-lg">\n                    ðŸ¤–\n                </div>\n                <div class="bg-white p-3 rounded-lg shadow-sm max-w-[80%] border border-primary-100">\n                    <p class="text-gray-800 text-left">${o}</p>\n                </div>\n            </div>\n            <div class="text-xs text-primary-500 mt-1 pl-10">${r}</div>\n        `,n.appendChild(s),n.scrollTop=n.scrollHeight}export function showTypingIndicator(e,t){e.classList.remove("hidden"),t.scrollTop=t.scrollHeight}export function hideTypingIndicator(e){e.classList.add("hidden")}export function initWidget(e){if(e.initialMessage){const t=document.querySelector("#chat-messages .message-enter");t&&(t.querySelector("p").textContent=e.initialMessage)}if(e.brandName){document.querySelectorAll(".font-semibold").forEach(t=>{"TuEmpresa"===t.textContent&&(t.textContent=e.brandName)})}if(e.suggestions&&e.suggestions.length>0){document.querySelectorAll(".suggestion-btn").forEach((t,n)=>{e.suggestions[n]&&(t.textContent=e.suggestions[n])})}e.primaryColor&&document.documentElement.style.setProperty("--color-primary-500",e.primaryColor),e.secondaryColor&&document.documentElement.style.setProperty("--color-secondary-600",e.secondaryColor)}export function createStreamingMessageElement(e){const t=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),n=document.createElement("div");return n.className="message-enter mb-4",n.id=e,n.innerHTML=`\n        <div class="flex items-start">\n            <div class="w-8 h-8 rounded-full bg-white border border-primary-200 flex items-center justify-center mr-2 text-lg">\n                ðŸ¤–\n            </div>\n            <div class="bg-white p-3 rounded-lg shadow-sm max-w-[80%] border border-primary-100">\n                <p class="text-gray-800 text-left" id="${e}-content"></p>\n            </div>\n        </div>\n        <div class="text-xs text-primary-500 mt-1 pl-10">${t}</div>\n    `,n}export function updateMessageElement(e,t){const n=document.getElementById(`${e}-content`);n&&(n.innerHTML+=formatMessage(t))}export function finalizeMessageElement(e,t){const n=document.getElementById(`${e}-content`);n&&(n.innerHTML=formatMessage(t))}